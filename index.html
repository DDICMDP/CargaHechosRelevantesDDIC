<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Hechos Relevantes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Librería docx para exportar a Word -->
  <script defer src="https://cdn.jsdelivr.net/npm/docx@8.5.0/build/index.umd.min.js"></script>

  <!-- Lógica principal -->
  <script defer src="assets/app.js"></script>

  <style>
    body { font-family: Arial, sans-serif; margin: 0; background:#f5f6f8; }
    header { background:#1a237e; color:white; padding:15px; text-align:center; }
    .container { max-width:1200px; margin:auto; padding:20px; }
    h1,h2 { margin:15px 0; }
    section { background:#fff; margin-bottom:20px; padding:15px; border-radius:6px; box-shadow:0 1px 4px rgba(0,0,0,0.1); }
    label { display:block; margin:8px 0 5px; font-weight:bold; }
    input, select, textarea { width:100%; padding:8px; margin-top:3px; border:1px solid #ccc; border-radius:4px; box-sizing:border-box; }
    textarea { resize:vertical; }
    button { margin:5px 5px 5px 0; padding:8px 14px; border:none; border-radius:4px; cursor:pointer; background:#1976d2; color:white; font-weight:bold; }
    button:hover { background:#125a9c; }
    button.ghost { background:#eee; color:#333; }
    .badge { padding:3px 6px; border-radius:4px; font-size:13px; }
    .badge.blue { background:#2196f3; color:white; }
    .badge.red { background:#f44336; color:white; }
    table { width:100%; border-collapse: collapse; margin-top:10px; font-size:14px; }
    th, td { border:1px solid #ccc; padding:6px; text-align:left; }
    th { background:#eee; }
    #previewHtml { background:#fafafa; min-height:120px; padding:10px; border:1px solid #ccc; border-radius:4px; }
    #errorBox { color:red; font-weight:bold; margin-top:10px; }
    .chips { margin-top:10px; }
    .chip { display:inline-block; margin:3px; padding:4px 8px; background:#e0e0e0; border-radius:20px; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <h1>Hechos Relevantes</h1>
  </header>
  <div class="container">

    <!-- Datos generales -->
    <section>
      <h2>Datos generales</h2>
      <label>Fecha: <input type="date" id="g_fecha_dia"></label>
      <label>Tipo exp: 
        <select id="g_tipoExp">
          <option value="PU">PU</option>
          <option value="IPP">IPP</option>
          <option value="Otro">Otro</option>
        </select>
      </label>
      <label>Número: <input type="text" id="g_numExp"></label>
      <label>Partido: 
        <select id="g_partido">
          <option value="">—</option>
          <option value="General Pueyrredon">General Pueyrredon</option>
          <option value="Balcarce">Balcarce</option>
          <option value="Mar Chiquita">Mar Chiquita</option>
          <option value="General Alvarado">General Alvarado</option>
        </select>
      </label>
      <label>Localidad: <select id="g_localidad"></select></label>
      <label>Dependencia: <select id="g_dep"></select></label>
      <div id="g_dep_manual_wrap" style="display:none;">
        <label>Otra dependencia: <input type="text" id="g_dep_manual"></label>
      </div>
      <label>Carátula: <input type="text" id="g_car"></label>
      <label>Subtítulo: <input type="text" id="g_sub"></label>
      <label>Esclarecido:
        <select id="g_ok">
          <option value="no">No</option>
          <option value="si">Sí</option>
        </select>
      </label>
      <label>UFI: <input type="text" id="g_ufi"></label>
      <label>Coordenadas: <input type="text" id="g_coord"></label>
      <label><input type="checkbox" id="g_relevante"> Relevante</label>
      <label><input type="checkbox" id="g_supervisado"> Supervisado</label>
    </section>

    <!-- Involucrados civiles -->
    <section>
      <h2>Involucrados civiles</h2>
      <label>Nombre: <input id="c_nombre"></label>
      <label>Apellido: <input id="c_apellido"></label>
      <label>Edad: <input id="c_edad"></label>
      <label>Género: <input id="c_genero"></label>
      <label>DNI: <input id="c_dni"></label>
      <label>País: <input id="c_pais"></label>
      <label>Localidad domicilio: <input id="c_loc"></label>
      <label>Calle domicilio: <input id="c_calle"></label>
      <label>Vínculo: 
        <select id="c_vinculo">
          <option>Victima</option>
          <option>Imputado</option>
          <option>Sindicado</option>
          <option>Testigo</option>
          <option>Denunciante</option>
        </select>
      </label>
      <label>Óbito: 
        <select id="c_obito">
          <option value="false">No</option>
          <option value="true">Sí</option>
        </select>
      </label>
      <button id="addCivil">Agregar involucrado</button>
      <div id="civilesList"></div>
    </section>

    <!-- Personal de fuerza -->
    <section>
      <h2>Personal de fuerza</h2>
      <label>Nombre: <input id="f_nombre"></label>
      <label>Apellido: <input id="f_apellido"></label>
      <label>Edad: <input id="f_edad"></label>
      <label>Fuerza: <input id="f_fuerza"></label>
      <label>Jerarquía: <input id="f_jerarquia"></label>
      <label>Legajo: <input id="f_legajo"></label>
      <label>Destino: <input id="f_destino"></label>
      <label>Localidad domicilio: <input id="f_loc"></label>
      <label>Calle domicilio: <input id="f_calle"></label>
      <label>Vínculo: 
        <select id="f_vinculo">
          <option>Imputado</option>
          <option>Sindicado</option>
          <option>Detenido</option>
        </select>
      </label>
      <label>Óbito: 
        <select id="f_obito">
          <option value="false">No</option>
          <option value="true">Sí</option>
        </select>
      </label>
      <button id="addFuerza">Agregar personal</button>
      <div id="fuerzasList"></div>
    </section>

    <!-- Objetos -->
    <section>
      <h2>Objetos</h2>
      <label>Descripción: <input id="o_desc"></label>
      <label>Vínculo: 
        <select id="o_vinc">
          <option>Secuestro</option>
          <option>Sustraccion</option>
          <option>Hallazgo</option>
          <option>Otro</option>
        </select>
      </label>
      <button id="addObjeto">Agregar objeto</button>
      <div id="objetosList"></div>
    </section>

    <!-- Cuerpo -->
    <section>
      <h2>Cuerpo del hecho</h2>
      <textarea id="cuerpo" rows="12"></textarea>
      <div class="chips" id="tagHelper"></div>
    </section>

    <!-- Preview -->
    <section>
      <h2>Vista previa</h2>
      <div id="tituloCompuesto"></div>
      <div id="subCompuesto"></div>
      <div id="previewHtml"></div>
      <div id="errorBox" hidden></div>
    </section>

    <!-- Acciones -->
    <section>
      <h2>Acciones</h2>
      <button id="generar">Generar vista previa</button>
      <button id="copiarWA">Copiar para WhatsApp</button>
      <button id="descargarWord">Descargar Word</button>
      <button id="downloadWordMulti">Descargar seleccionados en Word</button>
      <button id="avisarHecho" class="ghost">Avisar hecho importante</button>
      <button id="clearAll" class="ghost">Borrar formulario</button>
    </section>

    <!-- Lista de casos -->
    <section>
      <h2>Hechos guardados</h2>
      <label>Nombre auto generado: <input type="text" id="caseName"></label>
      <input type="text" id="caseSearch" placeholder="Buscar...">
      <div id="casesList">Sin hechos guardados.</div>
      <div style="margin-top:10px;">
        <button id="saveCase">Guardar hecho</button>
        <button id="updateCase">Actualizar</button>
        <button id="loadSelected">Cargar</button>
        <button id="deleteCase">Borrar</button>
        <button id="exportCSV">Exportar CSV</button>
        <button id="backupJSON">Backup JSON</button>
        <button id="restoreJSON">Restaurar</button>
        <button id="mergeJSON">Fusionar</button>
      </div>
    </section>

    <!-- Editor de catálogos -->
    <section>
      <h2>Editor de catálogos</h2>
      <label>Partido: 
        <select id="cat_partidoSel">
          <option>General Pueyrredon</option>
          <option>Balcarce</option>
          <option>Mar Chiquita</option>
          <option>General Alvarado</option>
        </select>
      </label>
      <label>Localidades: <textarea id="cat_localidades" rows="5"></textarea></label>
      <label>Dependencias: <textarea id="cat_dependencias" rows="5"></textarea></label>
      <button id="cat_guardar">Guardar catálogos</button>
      <button id="cat_reset" class="ghost">Restaurar valores</button>
    </section>
  </div>
</body>
</html>

